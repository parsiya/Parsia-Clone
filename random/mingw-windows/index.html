<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1"><link href=/css/fonts.css rel=stylesheet type=text/css><title>Call Windows APIs in C/C++ using MinGW</title><link rel=stylesheet href=/css/hugo-octopress.css><link rel=stylesheet href=https://parsiya.io//clone.css><link rel=stylesheet href=/css/fork-awesome.min.css><link href=https://parsiya.io/favicon.png rel=icon><meta name=description content><meta name=keywords content="[Parsia Hakimian Parsiya infosec information security]"><meta name=author content="Parsia-Clone"><meta name=generator content="Hugo 0.152.2"><meta name=twitter:card content="summary"><meta name=twitter:title content="Call Windows APIs in C/C++ using MinGW"><meta name=twitter:description content="Call Windows APIs with C++ using MinGW

This can be accomplished without Cygwin/MSYS.



Example Program

Let's assume we want to build the following program test.c. It displays a message box, sleeps for two seconds and displays another message box."><meta name=twitter:domain content="parsiya.io"><meta name=twitter:creator content="@CryptoGangsta"></head><body><header role=banner><hgroup><h1><a href=https://parsiya.io/>Parsia-Clone</a></h1><h2>'Documentation is a love letter that you write to your future self.' - Damian Conway</h2></hgroup></header><nav role=navigation><fieldset class=mobile-nav><select onchange="location=this.value"><option value>Navigate…</option><option value=https://github.com/parsiya/Parsia-Clone>» Parsia-Clone on Github</option><option value=https://parsiya.net/categories/clone/>» How did I make this?</option><option value=https://parsiya.net>» My Main Website</option></select></fieldset><ul class=main-navigation><li><a href=https://github.com/parsiya/Parsia-Clone title="Parsia-Clone on Github" target=_blank rel="noopener noreferrer">Parsia-Clone on Github</a></li><li><a href=https://parsiya.net/categories/clone/ title="How did I make this?" target=_blank rel="noopener noreferrer">How did I make this?</a></li><li><a href=https://parsiya.net title="My Main Website" target=_blank rel="noopener noreferrer">My Main Website</a></li></ul><ul class=subscription></ul><form action=https://www.google.com/search method=get target=_blank rel="noopener noreferrer"><fieldset role=search><input class=search type=text name=q results=0 placeholder=Search>
<input type=hidden name=q value=site:https://parsiya.io/></fieldset></form></nav><div id=main><div id=content><div><article class=hentry role=article><header><p class=meta>2 minute read
- <a class=label href=https://parsiya.io/categories/random/>Random</a></p><h1 class=entry-title>Call Windows APIs in C/C++ using MinGW</h1><a href=https://github.com/parsiya/Parsia-Clone/tree/main/random/mingw-windows.md target=_blank>Github Link</a></header><div class=entry-content><h1 id=call-windows-apis-with-c-using-mingw>Call Windows APIs with C++ using MinGW
<a class=header-link href=#call-windows-apis-with-c-using-mingw><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h1><p>This can be accomplished without Cygwin/MSYS.</p><h2 id=example-program>Example Program
<a class=header-link href=#example-program><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Let's assume we want to build the following program <code>test.c</code>. It displays a message box, sleeps for two seconds and displays another message box.</p><p>Using <code>#include &lt;windows.h></code> enables us to call Windows APIs.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#719e07>#include</span> <span style=color:#719e07>&lt;windows.h&gt;</span><span style=color:#719e07>
</span></span></span><span style=display:flex><span><span style=color:#719e07></span>
</span></span><span style=display:flex><span><span style=color:#586e75>// MessageBox: https://msdn.microsoft.com/en-us/library/windows/desktop/ms645505(v=vs.85).aspx
</span></span></span><span style=display:flex><span><span style=color:#586e75>// Sleep: https://msdn.microsoft.com/en-us/library/windows/desktop/ms686298(v=vs.85).aspx
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>
</span></span><span style=display:flex><span><span style=color:#dc322f>int</span> <span style=color:#268bd2>main</span>(<span style=color:#dc322f>void</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    MessageBox(<span style=color:#b58900>NULL</span>, <span style=color:#2aa198>&#34;test&#34;</span>, <span style=color:#2aa198>&#34;test&#34;</span>, <span style=color:#2aa198>0x20</span>);
</span></span><span style=display:flex><span>    Sleep(<span style=color:#2aa198>2000</span>);
</span></span><span style=display:flex><span>    MessageBox(<span style=color:#b58900>NULL</span>, <span style=color:#2aa198>&#34;test2&#34;</span>, <span style=color:#2aa198>&#34;test2&#34;</span>, <span style=color:#2aa198>0x06</span>);
</span></span><span style=display:flex><span>    <span style=color:#719e07>return</span> <span style=color:#2aa198>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=using-win-buildsorg>Using win-builds.org
<a class=header-link href=#using-win-buildsorg><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><ol><li>Download the installer from <a href=http://win-builds.org/ target=_blank rel="noreferrer noopener">http://win-builds.org/</a>.</li><li>Run the installer. Select <code>Native Windows</code> and <code>i686</code> arch.</li><li>Choose a path for 32-bit installation. For example: <code>c:\mingw\x86</code>.</li><li>Click on <code>Process</code> to start downloading.</li><li>If there's an error during a download, the tool will just stop. If the tools is not doing anything for a while, check the errors in command prompt. If this happens:<ul><li>Close the installer.</li><li>Navigate to <code>c:\mingw\x86\</code> and run <code>yypkg-1.5.0.exe</code> (version number might be different).</li><li>Click on <code>Process</code> again to continue downloading.</li><li>Rinse and repeat until everything is downloaded</li></ul></li><li>Go back to step 2, re-run the installer. Select <code>Native Windows</code> and <code>x86_64</code>.</li><li>Choose a path for 64-bit installation (must be on a Windows 64-bit machine). For example <code>c:\mingw\x64</code>.</li><li>Follow steps 4 and 5 until everything is installed.</li><li>Now we can build the program for both architectures (switches are optional).<ul><li>32-bit:<ul><li><code>cd c:\mingw\x86\bin</code></li><li><code>c:\mingw\x86\bin\> gcc.exe -g c:\path\to\test.c -o c:\path\to\test-32.exe -w -mwindows</code></li></ul></li><li>64-bit:<ul><li><code>cd c:\mingw\x64\bin</code></li><li><code>c:\mingw\x64\bin\> gcc.exe -g c:\path\to\test.c -o c:\path\to\test-32.exe -w -mwindows</code></li></ul></li></ul></li><li>If you see yourself building only one architecture, add the corresponding <code>bin</code> directory to PATH.</li></ol><h2 id=using-mingw-32-bit>Using MinGW (32-bit)
<a class=header-link href=#using-mingw-32-bit><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><ol><li>Install MinGW setup:<ul><li><a href=https://sourceforge.net/projects/mingw/files/Installer/ target=_blank rel="noreferrer noopener">https://sourceforge.net/projects/mingw/files/Installer/</a></li></ul></li><li>Install <code>mingw32-gcc-g++</code> using the package manager.</li><li>Add <code>C:\MinGW\bin</code> to PATH.</li><li>Do <code>gcc -g test.cpp -o text.exe -w -mwindows</code> (mix and match switches).</li></ol></div><footer><p class=meta><span class=categories>Tags:
<a class=category href=https://parsiya.io/tags/mingw>mingw</a> <a class=category href=https://parsiya.io/tags/windows>Windows</a></span></p></footer></article></div><aside class="sidebar thirds"><section class="first odd"><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><a href=#call-windows-apis-with-c-using-mingw>Call Windows APIs with C++ using MinGW</a><ul><li><a href=#example-program>Example Program</a></li><li><a href=#using-win-buildsorg>Using win-builds.org</a></li><li><a href=#using-mingw-32-bit>Using MinGW (32-bit)</a></li></ul></li></ul></nav></section></aside></div></div><footer role=contentinfo><p>Copyright &copy; 2025 Parsia-Clone - <a href=https://parsiya.io/license/>License</a> -
<span class=credit>Powered by <a target=_blank href=https://gohugo.io rel="noopener noreferrer">Hugo</a> and <a target=_blank href=https://github.com/parsiya/hugo-octopress/ rel="noopener noreferrer">Hugo-Octopress</a> theme.</p></footer></body></html>