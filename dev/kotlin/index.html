<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1"><link href=/css/fonts.css rel=stylesheet type=text/css><title>Kotlin Development</title><link rel=stylesheet href=/css/hugo-octopress.css><link rel=stylesheet href=https://parsiya.io//clone.css><link rel=stylesheet href=/css/fork-awesome.min.css><link href=https://parsiya.io/favicon.png rel=icon><meta name=description content><meta name=keywords content="[Parsia Hakimian Parsiya infosec information security]"><meta name=author content="Parsia-Clone"><meta name=generator content="Hugo 0.152.2"><meta name=twitter:card content="summary"><meta name=twitter:title content="Kotlin Development"><meta name=twitter:description content="Kotlin Language Server not Recognizing Burp API

The Kotlin extension by fwcd language server doesn't recognize
imported libraries in gradle projects.



Build Custom Language Server

Per BuZZ-dEE's instructions, I tried building and replacing the language
server:"><meta name=twitter:domain content="parsiya.io"><meta name=twitter:creator content="@CryptoGangsta"></head><body><header role=banner><hgroup><h1><a href=https://parsiya.io/>Parsia-Clone</a></h1><h2>'Documentation is a love letter that you write to your future self.' - Damian Conway</h2></hgroup></header><nav role=navigation><fieldset class=mobile-nav><select onchange="location=this.value"><option value>Navigate…</option><option value=https://github.com/parsiya/Parsia-Clone>» Parsia-Clone on Github</option><option value=https://parsiya.net/categories/clone/>» How did I make this?</option><option value=https://parsiya.net>» My Main Website</option></select></fieldset><ul class=main-navigation><li><a href=https://github.com/parsiya/Parsia-Clone title="Parsia-Clone on Github" target=_blank rel="noopener noreferrer">Parsia-Clone on Github</a></li><li><a href=https://parsiya.net/categories/clone/ title="How did I make this?" target=_blank rel="noopener noreferrer">How did I make this?</a></li><li><a href=https://parsiya.net title="My Main Website" target=_blank rel="noopener noreferrer">My Main Website</a></li></ul><ul class=subscription></ul><form action=https://www.google.com/search method=get target=_blank rel="noopener noreferrer"><fieldset role=search><input class=search type=text name=q results=0 placeholder=Search>
<input type=hidden name=q value=site:https://parsiya.io/></fieldset></form></nav><div id=main><div id=content><div><article class=hentry role=article><header><p class=meta>5 minute read
- <a class=label href=https://parsiya.io/categories/development/>Development</a></p><h1 class=entry-title>Kotlin Development</h1><a href=https://github.com/parsiya/Parsia-Clone/tree/main/dev/kotlin.md target=_blank>Github Link</a></header><div class=entry-content><nav id=TableOfContents><ul><li><a href=#kotlin-language-server-not-recognizing-burp-api>Kotlin Language Server not Recognizing Burp API</a><ul><li><a href=#build-custom-language-server>Build Custom Language Server</a></li><li><a href=#troubleshooting-path-issues>Troubleshooting Path Issues</a><ul><li><a href=#solution-different-extension>Solution: Different Extension</a></li></ul></li></ul></li><li><a href=#kotlin-result-type-tutorial>Kotlin Result Type Tutorial</a><ul><li><a href=#simple-example-function>Simple Example Function</a></li><li><a href=#kotlin-vs-rust>Kotlin vs Rust</a></li><li><a href=#1-getorelse---provide-default-value>1. <code>getOrElse</code> - Provide Default Value</a></li><li><a href=#2-getornull---nullable-result>2. <code>getOrNull</code> - Nullable Result</a></li><li><a href=#3-getorthrow---throw-on-error>3. <code>getOrThrow</code> - Throw on Error</a><ul><li><a href=#31-exception-propagation-patterns>3.1. Exception Propagation Patterns</a></li></ul></li><li><a href=#4-pattern-matching-with-when>4. Pattern Matching with <code>when</code></a></li><li><a href=#5-onsuccess-and-onfailure---side-effects>5. <code>onSuccess</code> and <code>onFailure</code> - Side Effects</a><ul><li><a href=#using-it-vs-named-parameters>Using <code>it</code> vs Named Parameters</a></li><li><a href=#checking-status-with-issuccess-and-isfailure>Checking Status with <code>isSuccess</code> and <code>isFailure</code></a></li></ul></li><li><a href=#6-chaining-operations-with-map-and-mapcatching>6. Chaining Operations with <code>map</code> and <code>mapCatching</code></a><ul><li><a href=#best-practices>Best Practices</a></li><li><a href=#real-world-database-example>Real-World Database Example</a></li></ul></li></ul></li></ul></nav><h1 id=kotlin-language-server-not-recognizing-burp-api>Kotlin Language Server not Recognizing Burp API
<a class=header-link href=#kotlin-language-server-not-recognizing-burp-api><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h1><p>The <a href="https://marketplace.visualstudio.com/items?itemName=fwcd.kotlin" target=_blank rel="noreferrer noopener">Kotlin extension by fwcd</a> language server doesn't recognize
imported libraries in gradle projects.</p><h2 id=build-custom-language-server>Build Custom Language Server
<a class=header-link href=#build-custom-language-server><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Per <a href=https://github.com/fwcd/vscode-kotlin/issues/85#issuecomment-2095793958 target=_blank rel="noreferrer noopener">BuZZ-dEE's instructions</a>, I tried building and replacing the language
server:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#586e75># install openjdk 11, you probably need 21 for Burp, too.</span>
</span></span><span style=display:flex><span>sudo apt install msopenjdk-11
</span></span><span style=display:flex><span>git clone https://github.com/fwcd/kotlin-language-server
</span></span><span style=display:flex><span><span style=color:#b58900>cd</span> kotlin-language-server
</span></span><span style=display:flex><span>./gradlew :server:installDist
</span></span><span style=display:flex><span>mv ~/.vscode-server/data/User/globalStorage/fwcd.kotlin/langServerInstall/server server-backup
</span></span><span style=display:flex><span><span style=color:#586e75># assuming /kotlin-language-server is where you built the server</span>
</span></span><span style=display:flex><span>cp -r ~/kotlin-language-server/server/build/install/server ~/.vscode-server/data/User/globalStorage/fwcd.kotlin/langServerInstall/
</span></span></code></pre></div><p>Copied the server instead of symlinking per original instructions. Didn't work!</p><h2 id=troubleshooting-path-issues>Troubleshooting Path Issues
<a class=header-link href=#troubleshooting-path-issues><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Set custom language server path in extension settings:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#2aa198>&#34;kotlin.languageServer.path&#34;</span>:
</span></span><span style=display:flex><span>    <span style=color:#2aa198>&#34;~/.vscode-server/data/User/globalStorage/fwcd.kotlin/langServerInstall/server/bin/kotlin-language-server&#34;</span>
</span></span></code></pre></div><p><strong>Error encountered:</strong></p><pre tabindex=0><code>[Error - 11:56:46 AM] Kotlin Language Client client:
    couldn&#39;t create connection to server.
Launching server command ~/.vscode-server/data/User/globalStorage/fwcd.kotlin/langServerInstall/server/bin/kotlin-language-server failed. Error: spawn ~/.vscode-server/data/User/globalStorage/fwcd.kotlin/langServerInstall/server/bin/kotlin-language-server ENOENT
</code></pre><p>Which is weird, because I can run the language server manually with that command and it says:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>SLF<span style=color:#2aa198>4</span>J: Failed to load class <span style=color:#2aa198>&#34;org.slf4j.impl.StaticLoggerBinder&#34;</span>.
</span></span><span style=display:flex><span>SLF<span style=color:#2aa198>4</span>J: Defaulting to no-operation (NOP) logger implementation
</span></span><span style=display:flex><span>SLF<span style=color:#2aa198>4</span>J: See http:<span style=color:#586e75>//www.slf4j.org/codes.html#StaticLoggerBinder for further details.
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>Content-Length: <span style=color:#2aa198>127</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{<span style=color:#268bd2>&#34;jsonrpc&#34;</span>:<span style=color:#2aa198>&#34;2.0&#34;</span>,<span style=color:#268bd2>&#34;method&#34;</span>:<span style=color:#2aa198>&#34;window/logMessage&#34;</span>,<span style=color:#268bd2>&#34;params&#34;</span>:{<span style=color:#268bd2>&#34;type&#34;</span>:<span style=color:#2aa198>3</span>,<span style=color:#268bd2>&#34;message&#34;</span>:<span style=color:#2aa198>&#34;main      Kotlin Language Server: Version 1.3.14&#34;</span>}}Content-Length: <span style=color:#2aa198>108</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{<span style=color:#268bd2>&#34;jsonrpc&#34;</span>:<span style=color:#2aa198>&#34;2.0&#34;</span>,<span style=color:#268bd2>&#34;method&#34;</span>:<span style=color:#2aa198>&#34;window/logMessage&#34;</span>,<span style=color:#268bd2>&#34;params&#34;</span>:{<span style=color:#268bd2>&#34;type&#34;</span>:<span style=color:#2aa198>3</span>,<span style=color:#268bd2>&#34;message&#34;</span>:<span style=color:#2aa198>&#34;main      Connected to client&#34;</span>}}
</span></span></code></pre></div><p>Not sure which client it is. Replacing <code>~</code> with the complete path runs the
server, but the problem still exists.</p><h3 id=solution-different-extension>Solution: Different Extension
<a class=header-link href=#solution-different-extension><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>Gave up on fwcd extension. Use <a href=https://github.com/Kotlin/kotlin-lsp target=_blank rel="noreferrer noopener">Kotlin/kotlin-lsp</a> instead -
download and install the VSIX manually. This one actually works with gradle
projects.</p><hr><h1 id=kotlin-result-type-tutorial>Kotlin Result Type Tutorial
<a class=header-link href=#kotlin-result-type-tutorial><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h1><p>Originally AI generated, but heavily edited.</p><p>The <code>Result&lt;T></code> type in Kotlin is similar to Rust's <code>Result&lt;T, E></code>. It forces
you to handle both success and failure cases.</p><h2 id=simple-example-function>Simple Example Function
<a class=header-link href=#simple-example-function><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#719e07>fun</span> <span style=color:#268bd2>divide</span>(a: Int, b: Int): Result&lt;Double&gt; {
</span></span><span style=display:flex><span>  <span style=color:#719e07>return</span> <span style=color:#719e07>when</span> (b) {
</span></span><span style=display:flex><span>    <span style=color:#2aa198>0</span> <span style=color:#719e07>-&gt;</span> <span style=color:#268bd2>Result</span>.failure(ArithmeticException(<span style=color:#2aa198>&#34;Division by zero&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#719e07>else</span> <span style=color:#719e07>-&gt;</span> <span style=color:#268bd2>Result</span>.success(a.toDouble() / b)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=kotlin-vs-rust>Kotlin vs Rust
<a class=header-link href=#kotlin-vs-rust><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><table><thead><tr><th>Kotlin</th><th>Rust</th><th>Description</th></tr></thead><tbody><tr><td><code>getOrElse { default }</code></td><td><code>unwrap_or_else(|e| default)</code></td><td>Get value or compute default from error</td></tr><tr><td><code>getOrNull()</code></td><td><code>ok()</code></td><td>Get <code>Some(value)</code> or <code>None</code></td></tr><tr><td><code>getOrThrow()</code></td><td><code>unwrap()</code></td><td>Get value or panic</td></tr><tr><td><code>isSuccess</code></td><td><code>is_ok()</code></td><td>Check if success</td></tr><tr><td><code>isFailure</code></td><td><code>is_err()</code></td><td>Check if error</td></tr><tr><td><code>onFailure { }</code></td><td><code>map_err(|e| { })</code></td><td>Handle error case</td></tr><tr><td><code>onSuccess { }</code></td><td><code>map(|v| { })</code></td><td>Handle success case</td></tr></tbody></table><h2 id=1-getorelse---provide-default-value>1. <code>getOrElse</code> - Provide Default Value
<a class=header-link href=#1-getorelse---provide-default-value><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#586e75>// Simple default value - returns the success value, or 0.0 for failure.
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>val</span> result = divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>2</span>).getOrElse { <span style=color:#2aa198>0.0</span> }
</span></span><span style=display:flex><span>println(result) <span style=color:#586e75>// 5.0
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#586e75>// Handle error and provide fallback - the lambda receives the exception for
</span></span></span><span style=display:flex><span><span style=color:#586e75>// custom handling
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>val</span> safeResult = divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>0</span>).getOrElse { exception <span style=color:#719e07>-&gt;</span>
</span></span><span style=display:flex><span>  println(<span style=color:#2aa198>&#34;Error: </span><span style=color:#2aa198>${exception.message}</span><span style=color:#2aa198>&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#268bd2>Double</span>.NaN <span style=color:#586e75>// Return NaN for division by zero
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>}
</span></span></code></pre></div><h2 id=2-getornull---nullable-result>2. <code>getOrNull</code> - Nullable Result
<a class=header-link href=#2-getornull---nullable-result><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#586e75>// Returns the success value or null if it failed - enables null-safety patterns
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>val</span> result = divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>2</span>).getOrNull()
</span></span><span style=display:flex><span><span style=color:#719e07>if</span> (result <span style=color:#719e07>!=</span> <span style=color:#719e07>null</span>) {
</span></span><span style=display:flex><span>    println(<span style=color:#2aa198>&#34;Success: </span><span style=color:#2aa198>$result</span><span style=color:#2aa198>&#34;</span>)
</span></span><span style=display:flex><span>} <span style=color:#719e07>else</span> {
</span></span><span style=display:flex><span>    println(<span style=color:#2aa198>&#34;Operation failed&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75>// With elvis operator - provides default value when result is null
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>val</span> safeResult = divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>0</span>).getOrNull() <span style=color:#719e07>?:</span> <span style=color:#2aa198>0.0</span>
</span></span></code></pre></div><h2 id=3-getorthrow---throw-on-error>3. <code>getOrThrow</code> - Throw on Error
<a class=header-link href=#3-getorthrow---throw-on-error><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#586e75>// Unwraps success value or throws the original exception - use with try/catch
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#719e07>val</span> result = divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>2</span>).getOrThrow()
</span></span><span style=display:flex><span>    println(<span style=color:#2aa198>&#34;Result: </span><span style=color:#2aa198>$result</span><span style=color:#2aa198>&#34;</span>)
</span></span><span style=display:flex><span>} <span style=color:#719e07>catch</span> (e: Exception) {
</span></span><span style=display:flex><span>    println(<span style=color:#2aa198>&#34;Caught exception: </span><span style=color:#2aa198>${e.message}</span><span style=color:#2aa198>&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=31-exception-propagation-patterns>3.1. Exception Propagation Patterns
<a class=header-link href=#31-exception-propagation-patterns><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#586e75>// Direct propagation - throws the original exception
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>val</span> result = divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>0</span>).getOrThrow()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75>// Propagate via getOrElse lambda
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>val</span> safeResult = divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>0</span>).getOrElse { exception <span style=color:#719e07>-&gt;</span>
</span></span><span style=display:flex><span>    println(<span style=color:#2aa198>&#34;Logging error before re-throwing&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#719e07>throw</span> exception
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75>// Most idiomatic - return Result and let caller decide
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>fun</span> <span style=color:#268bd2>processData</span>(): Result&lt;Double&gt; {
</span></span><span style=display:flex><span>  <span style=color:#719e07>return</span> divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>0</span>)
</span></span><span style=display:flex><span>    .map { <span style=color:#719e07>it</span> * <span style=color:#2aa198>2</span> }     <span style=color:#586e75>// Transform if successful
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>    .mapCatching { <span style=color:#719e07>value</span> <span style=color:#719e07>-&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#719e07>if</span> (<span style=color:#719e07>value</span> &lt; <span style=color:#2aa198>0</span>) <span style=color:#719e07>throw</span> IllegalStateException(<span style=color:#2aa198>&#34;Negative result&#34;</span>)
</span></span><span style=display:flex><span>      <span style=color:#719e07>value</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75>// Caller handles the final Result
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>val</span> finalResult = processData().getOrThrow() <span style=color:#586e75>// or .getOrElse { ... }
</span></span></span></code></pre></div><h2 id=4-pattern-matching-with-when>4. Pattern Matching with <code>when</code>
<a class=header-link href=#4-pattern-matching-with-when><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#586e75>// Pattern match on Result type to handle success and failure cases differently
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>when</span> (<span style=color:#719e07>val</span> result = divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>0</span>)) {
</span></span><span style=display:flex><span>  <span style=color:#719e07>is</span> <span style=color:#268bd2>Result</span>.Success <span style=color:#719e07>-&gt;</span> {
</span></span><span style=display:flex><span>    println(<span style=color:#2aa198>&#34;Success: </span><span style=color:#2aa198>${result.getOrNull()}</span><span style=color:#2aa198>&#34;</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#719e07>is</span> <span style=color:#268bd2>Result</span>.Failure <span style=color:#719e07>-&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#719e07>val</span> exception = result.exceptionOrNull()
</span></span><span style=display:flex><span>    println(<span style=color:#2aa198>&#34;Failed: </span><span style=color:#2aa198>${exception?.message}</span><span style=color:#2aa198>&#34;</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=5-onsuccess-and-onfailure---side-effects>5. <code>onSuccess</code> and <code>onFailure</code> - Side Effects
<a class=header-link href=#5-onsuccess-and-onfailure---side-effects><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#586e75>// Execute side effects (logging, etc.) without consuming the Result - chainable
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>2</span>)
</span></span><span style=display:flex><span>  .onSuccess { <span style=color:#719e07>value</span> <span style=color:#719e07>-&gt;</span> 
</span></span><span style=display:flex><span>    println(<span style=color:#2aa198>&#34;Division successful: </span><span style=color:#2aa198>$value</span><span style=color:#2aa198>&#34;</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  .onFailure { exception <span style=color:#719e07>-&gt;</span>
</span></span><span style=display:flex><span>    println(<span style=color:#2aa198>&#34;Division failed: </span><span style=color:#2aa198>${exception.message}</span><span style=color:#2aa198>&#34;</span>)
</span></span><span style=display:flex><span>  }
</span></span></code></pre></div><h3 id=using-it-vs-named-parameters>Using <code>it</code> vs Named Parameters
<a class=header-link href=#using-it-vs-named-parameters><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#586e75>// Using Kotlin&#39;s default &#39;it&#39; parameter - more concise
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>2</span>)
</span></span><span style=display:flex><span>  .onSuccess { println(<span style=color:#2aa198>&#34;Division successful: </span><span style=color:#2aa198>$it</span><span style=color:#2aa198>&#34;</span>) }  <span style=color:#586e75>// &#39;it&#39; = success value
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>  .onFailure { println(<span style=color:#2aa198>&#34;Error: </span><span style=color:#2aa198>${it.message}</span><span style=color:#2aa198>&#34;</span>) }      <span style=color:#586e75>// &#39;it&#39; = exception
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>
</span></span><span style=display:flex><span><span style=color:#586e75>// Using explicit parameter names - more readable for complex lambdas
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>2</span>)
</span></span><span style=display:flex><span>  .onSuccess { <span style=color:#719e07>value</span> <span style=color:#719e07>-&gt;</span> println(<span style=color:#2aa198>&#34;Division successful: </span><span style=color:#2aa198>$value</span><span style=color:#2aa198>&#34;</span>) }
</span></span><span style=display:flex><span>  .onFailure { exception <span style=color:#719e07>-&gt;</span> println(<span style=color:#2aa198>&#34;Error: </span><span style=color:#2aa198>${exception.message}</span><span style=color:#2aa198>&#34;</span>) }
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#586e75>// Chaining side effects with other operations - the Result flows through unchanged
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>val</span> finalResult = divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>2</span>)
</span></span><span style=display:flex><span>  .onSuccess { println(<span style=color:#2aa198>&#34;Step 1: Division = </span><span style=color:#2aa198>$it</span><span style=color:#2aa198>&#34;</span>) }
</span></span><span style=display:flex><span>  .map { <span style=color:#719e07>it</span> * <span style=color:#2aa198>3</span> }
</span></span><span style=display:flex><span>  .onSuccess { println(<span style=color:#2aa198>&#34;Step 2: Multiplication = </span><span style=color:#2aa198>$it</span><span style=color:#2aa198>&#34;</span>) }
</span></span><span style=display:flex><span>  .mapCatching { <span style=color:#719e07>value</span> <span style=color:#719e07>-&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#719e07>if</span> (<span style=color:#719e07>value</span> &gt; <span style=color:#2aa198>10</span>) <span style=color:#719e07>value</span> <span style=color:#719e07>else</span> <span style=color:#719e07>throw</span> IllegalArgumentException(<span style=color:#2aa198>&#34;Value too small&#34;</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  .onSuccess { println(<span style=color:#2aa198>&#34;Step 3: Validation passed = </span><span style=color:#2aa198>$it</span><span style=color:#2aa198>&#34;</span>) }
</span></span><span style=display:flex><span>  .onFailure { println(<span style=color:#2aa198>&#34;Error occurred: </span><span style=color:#2aa198>${it.message}</span><span style=color:#2aa198>&#34;</span>) }
</span></span><span style=display:flex><span>  .getOrElse { <span style=color:#2aa198>0.0</span> }
</span></span></code></pre></div><h3 id=checking-status-with-issuccess-and-isfailure>Checking Status with <code>isSuccess</code> and <code>isFailure</code>
<a class=header-link href=#checking-status-with-issuccess-and-isfailure><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#586e75>// Check Result status without consuming the value - useful for conditional logic
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>val</span> result = divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>0</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#719e07>if</span> (result.isSuccess) {
</span></span><span style=display:flex><span>  println(<span style=color:#2aa198>&#34;Operation succeeded&#34;</span>)
</span></span><span style=display:flex><span>} <span style=color:#719e07>else</span> <span style=color:#719e07>if</span> (result.isFailure) {
</span></span><span style=display:flex><span>  println(<span style=color:#2aa198>&#34;Operation failed&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=6-chaining-operations-with-map-and-mapcatching>6. Chaining Operations with <code>map</code> and <code>mapCatching</code>
<a class=header-link href=#6-chaining-operations-with-map-and-mapcatching><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#719e07>val</span> result = divide(<span style=color:#2aa198>20</span>, <span style=color:#2aa198>4</span>)
</span></span><span style=display:flex><span>  .map { <span style=color:#719e07>it</span> * <span style=color:#2aa198>2</span> }  <span style=color:#586e75>// Transform success value
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>  .map { <span style=color:#719e07>it</span>.toInt() }  <span style=color:#586e75>// Chain transformations
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>  .getOrElse { -<span style=color:#2aa198>1</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>println(result) <span style=color:#586e75>// 10
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>
</span></span><span style=display:flex><span><span style=color:#586e75>// mapCatching for operations that might throw
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>val</span> chainedResult = divide(<span style=color:#2aa198>10</span>, <span style=color:#2aa198>2</span>)
</span></span><span style=display:flex><span>  .mapCatching { <span style=color:#719e07>value</span> <span style=color:#719e07>-&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#719e07>if</span> (<span style=color:#719e07>value</span> &gt; <span style=color:#2aa198>3</span>) <span style=color:#719e07>value</span> <span style=color:#719e07>else</span> <span style=color:#719e07>throw</span> IllegalArgumentException(<span style=color:#2aa198>&#34;Too small&#34;</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  .getOrElse { <span style=color:#2aa198>0.0</span> }
</span></span></code></pre></div><h3 id=best-practices>Best Practices
<a class=header-link href=#best-practices><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><ol><li><strong>Use <code>getOrElse</code></strong> for providing sensible defaults.</li><li><strong>Use <code>onFailure</code></strong> for logging or side effects without changing the flow.</li><li><strong>Use pattern matching</strong> when you need different logic for success/failure.</li><li><strong>Use <code>getOrNull</code></strong> when you want to handle null values with standard null-safety.</li><li><strong>Avoid <code>getOrThrow</code></strong> unless you're sure the operation should crash on failure.</li></ol><h3 id=real-world-database-example>Real-World Database Example
<a class=header-link href=#real-world-database-example><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#719e07>fun</span> <span style=color:#268bd2>getUserById</span>(id: Int): Result&lt;User&gt; {
</span></span><span style=display:flex><span>  <span style=color:#719e07>return</span> <span style=color:#268bd2>Database</span>.query(<span style=color:#2aa198>&#34;SELECT * FROM users WHERE id = ?&#34;</span>, id)
</span></span><span style=display:flex><span>    .mapCatching { rows <span style=color:#719e07>-&gt;</span>
</span></span><span style=display:flex><span>      rows.firstOrNull() <span style=color:#719e07>?:</span> <span style=color:#719e07>throw</span> NoSuchElementException(<span style=color:#2aa198>&#34;User not found&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    .mapCatching { row <span style=color:#719e07>-&gt;</span>
</span></span><span style=display:flex><span>      User(
</span></span><span style=display:flex><span>        id = row[<span style=color:#2aa198>&#34;id&#34;</span>] <span style=color:#719e07>as</span> Int,
</span></span><span style=display:flex><span>        name = row[<span style=color:#2aa198>&#34;name&#34;</span>] <span style=color:#719e07>as</span> String,
</span></span><span style=display:flex><span>        email = row[<span style=color:#2aa198>&#34;email&#34;</span>] <span style=color:#719e07>as</span> String
</span></span><span style=display:flex><span>      )
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75>// Usage
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#719e07>val</span> user = getUserById(<span style=color:#2aa198>123</span>)
</span></span><span style=display:flex><span>  .onFailure { <span style=color:#268bd2>Log</span>.toError(<span style=color:#2aa198>&#34;Failed to get user: </span><span style=color:#2aa198>${it.message}</span><span style=color:#2aa198>&#34;</span>) }
</span></span><span style=display:flex><span>  .getOrElse { <span style=color:#268bd2>User</span>.ANONYMOUS }
</span></span></code></pre></div></div><footer><p class=meta></span></p></footer></article></div><aside class="sidebar thirds"><section class="first odd"><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><a href=#kotlin-language-server-not-recognizing-burp-api>Kotlin Language Server not Recognizing Burp API</a><ul><li><a href=#build-custom-language-server>Build Custom Language Server</a></li><li><a href=#troubleshooting-path-issues>Troubleshooting Path Issues</a><ul><li><a href=#solution-different-extension>Solution: Different Extension</a></li></ul></li></ul></li><li><a href=#kotlin-result-type-tutorial>Kotlin Result Type Tutorial</a><ul><li><a href=#simple-example-function>Simple Example Function</a></li><li><a href=#kotlin-vs-rust>Kotlin vs Rust</a></li><li><a href=#1-getorelse---provide-default-value>1. <code>getOrElse</code> - Provide Default Value</a></li><li><a href=#2-getornull---nullable-result>2. <code>getOrNull</code> - Nullable Result</a></li><li><a href=#3-getorthrow---throw-on-error>3. <code>getOrThrow</code> - Throw on Error</a><ul><li><a href=#31-exception-propagation-patterns>3.1. Exception Propagation Patterns</a></li></ul></li><li><a href=#4-pattern-matching-with-when>4. Pattern Matching with <code>when</code></a></li><li><a href=#5-onsuccess-and-onfailure---side-effects>5. <code>onSuccess</code> and <code>onFailure</code> - Side Effects</a><ul><li><a href=#using-it-vs-named-parameters>Using <code>it</code> vs Named Parameters</a></li><li><a href=#checking-status-with-issuccess-and-isfailure>Checking Status with <code>isSuccess</code> and <code>isFailure</code></a></li></ul></li><li><a href=#6-chaining-operations-with-map-and-mapcatching>6. Chaining Operations with <code>map</code> and <code>mapCatching</code></a><ul><li><a href=#best-practices>Best Practices</a></li><li><a href=#real-world-database-example>Real-World Database Example</a></li></ul></li></ul></li></ul></nav></section></aside></div></div><footer role=contentinfo><p>Copyright &copy; 2025 Parsia-Clone - <a href=https://parsiya.io/license/>License</a> -
<span class=credit>Powered by <a target=_blank href=https://gohugo.io rel="noopener noreferrer">Hugo</a> and <a target=_blank href=https://github.com/parsiya/hugo-octopress/ rel="noopener noreferrer">Hugo-Octopress</a> theme.</p></footer></body></html>